<%- include('../layouts/header', { title: title }) %> <%-
include('../partials/navbar') %>

<!-- Link ke auth.css -->
<link rel="stylesheet" href="/css/auth.css" />

<div class="container auth-container">
  <div class="row justify-content-center">
    <div class="col-12">
      <div class="auth-card">
        <!-- Header -->
        <div class="text-center mb-4">
          <i class="fas fa-lock-open fa-3x text-aqua"></i>
          <h2 class="mt-3">Reset Password</h2>
          <p class="text-white">Enter your new password</p>
        </div>

        <!-- Reset Password Form -->
        <form action="/reset-password" method="POST" id="resetForm">
          <!-- Hidden token field -->
          <input type="hidden" name="token" value="<%= token || '' %>" />

          <div class="mb-3">
            <label for="password" class="form-label">
              <i class="fas fa-lock"></i> New Password
            </label>
            <input
              type="password"
              class="form-control"
              id="password"
              name="password"
              placeholder="Minimum 8 characters"
              required
              minlength="8"
            />
            <small class="text-white">Minimum 8 characters</small>
          </div>

          <div class="mb-4">
            <label for="confirmPassword" class="form-label">
              <i class="fas fa-lock"></i> Confirm New Password
            </label>
            <input
              type="password"
              class="form-control"
              id="confirmPassword"
              name="confirmPassword"
              placeholder="Re-enter your new password"
              required
            />
          </div>

          <button type="submit" class="btn btn-aqua w-100 mb-3">
            <i class="fas fa-check"></i> Reset Password
          </button>

          <div class="text-center">
            <p class="mb-0">
              <a href="/login" class="text-aqua">Back to Login</a>
            </p>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Password Match Validation -->
<script>
  document.getElementById("resetForm").addEventListener("submit", function (e) {
    const password = document.getElementById("password").value;
    const confirmPassword = document.getElementById("confirmPassword").value;

    if (password !== confirmPassword) {
      e.preventDefault();
      alert("Passwords do not match!");
      return false;
    }

    if (password.length < 8) {
      e.preventDefault();
      alert("Password must be at least 8 characters long!");
      return false;
    }
  });
</script>

<%- include('../layouts/footer') %>
